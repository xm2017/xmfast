<site>
  <packgetname>
    com.A4YY
  </packgetname>
  <minapi>
    1
  </minapi>
  <author name="群友提供" avatarUrl="" description="大神在此" donateUrl="" />
  <info type="801" versionCode="003" versionName="v3.0" name="A4YY" description="资源还不错啊" iconUrl="https://img03.sogoucdn.com/v2/thumb/retype_exclude_gif/ext/auto/q/80?url=https%3A%2F%2Fi01piccdn.sogoucdn.com%2F98fa40d3ba901925&amp;appid=122"
    subscribeUrl="https://raw.githubusercontent.com/xm2017/xmfast/master/demo/siteAppa4yy.html" />
  <rule type="101" typeonclickaction="" subtypename="电影" jsmethod="list();" url="http://m.aaqqy.com/vod-list-id-1-pg-%count%-order--by-hits-class-0-year-0-letter--area--lang-.html"
    currentpagecountholder="%count%" searchkeywordholder="">
    <script>
      function list() {
        var host = "http://m.aaqqy.com";
        var root = document.getElementById("vod_list");
        var datalist = root.getElementsByTagName("li");

        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("a")[0].title;
          var imgurl = "http:" + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": JSON.stringify(tmparray) };
        return response;
      }
    </script>
  </rule>
  <rule type="101" typeonclickaction="" subtypename="追剧" jsmethod="list();" url="http://m.aaqqy.com/vod-list-id-2-pg-%count%-order--by-hits-class-0-year-0-letter--area--lang-.html"
    currentpagecountholder="%count%" searchkeywordholder="">
    <script>
      function list() {
        var host = "http://m.aaqqy.com";
        var root = document.getElementById("vod_list");
        var datalist = root.getElementsByTagName("li");

        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("a")[0].title;
          var imgurl = "http:" + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": JSON.stringify(tmparray) };
        return response;
      }
    </script>
  </rule>
  <rule type="101" typeonclickaction="" subtypename="动漫" jsmethod="list();" url="http://m.aaqqy.com/vod-list-id-4-pg-%count%-order--by-hits-class-0-year-0-letter--area--lang-.html"
    currentpagecountholder="%count%" searchkeywordholder="">
    <script>
      function list() {
        var host = "http://m.aaqqy.com";
        var root = document.getElementById("vod_list");
        var datalist = root.getElementsByTagName("li");

        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("a")[0].title;
          var imgurl = "http:" + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": JSON.stringify(tmparray) };
        return response;
      }
    </script>
  </rule>
  <rule type="101" typeonclickaction="" subtypename="综艺" jsmethod="list();" url="http://m.aaqqy.com/vod-list-id-3-pg-%count%-order--by-hits-class-0-year-0-letter--area--lang-.html"
    currentpagecountholder="%count%" searchkeywordholder="">
    <script>
      function list() {
        var host = "http://m.aaqqy.com";
        var root = document.getElementById("vod_list");
        var datalist = root.getElementsByTagName("li");

        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("a")[0].title;
          var imgurl = "http:" + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": JSON.stringify(tmparray) };
        return response;
      }
    </script>
  </rule>
  <rule type="102" jsmethod="detail();">
    <script>

      function detail() {
        var host = "http://m.aaqqy.com";
        var posterUrl = "http:" + $("img.loading:first").get(0).getAttribute("data-original");
        var pageTitle = $("img.loading").get(0).getAttribute("alt");
        var allText = $("div.vod_content").get(0).innerHTML.trim().replace(" ", "").replace("\n", "");
        var shortText = allText.substring(0, allText.length > 200 ? 200 : allText.length).trim();

        var actor;
        var actorTmp = $("div.vod-n-l:first p").toArray();
        for (var i = 0; i < actorTmp.length; i++) {
          var stTmp;
          stTmp = actorTmp[i].getElementsByTagName("em")[0].innerHTML;
          if (stTmp.indexOf("主演") != -1) continue;
          if (stTmp.indexOf("状态") != -1 || stTmp.indexOf("更新") != -1) {
            stTmp = actorTmp[i].innerHTML;
          }
          var stDetail = actorTmp[i].getElementsByTagName("a");
          for (var j = 0; j < stDetail.length; j++) {
            var stDetailTmp = stDetail[j].innerHTML;
            stTmp = stTmp + " " + stDetailTmp;
          }
          actor = actor + "<br>" + stTmp;
        }

        var allDownList = new Array();
        var allDownTitleTmp = $("div.play-title a").toArray();
        var allDownListTmp = $(".play-box").toArray();
        for (var i = 0; i < allDownListTmp.length; i++) {
          var titleSort = allDownTitleTmp[i].innerHTML;
          var downloadTmp = allDownListTmp[i].getElementsByTagName("li");
          var oneDownList = new Array();
          for (var j = 0; j < downloadTmp.length; j++) {
            var href = host + downloadTmp[j].getElementsByTagName("a")[0].getAttribute("href");
            var title = downloadTmp[j].getElementsByTagName("a")[0].getAttribute("title");
            var downloadBean = { "name": title, "href": href };
            oneDownList.push(downloadBean);
          }
          var pageDetail = { "title": titleSort, "downlistInfos": oneDownList };
          allDownList.push(pageDetail);
        }

        var pageInfo = {
          "posterUrl": posterUrl,
          "title": pageTitle,
          "allText": allText,
          "shortText": shortText,
          "summary": actor.replace("undefined", ""),
          "downlist": allDownList
        };
        var response = { "code": "200", "msg": "suc", "content": pageInfo };
        return response;
      }

    </script>
  </rule>
  <rule type="103" typeonclickaction="" subtypename="" jsmethod="search();" url="http://m.aaqqy.com/vod-search-pg-%count%-wd-%keyword%.html"
    currentpagecountholder="%count%" searchkeywordholder="%keyword%">
    <script>
      function search() {
        var host = "http://m.aaqqy.com";
        var root = document.getElementById("resize_list");
        var datalist = root.getElementsByTagName("li");

        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("a")[0].title;
          var imgurl = "http:" + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": JSON.stringify(tmparray) };
        return response;
      }
    </script>
  </rule>
</site>